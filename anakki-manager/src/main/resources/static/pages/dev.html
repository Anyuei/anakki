<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="时光胶囊,Anakki的个人网站,摄影,博客,技术分享。">
    <meta name="author" content="Anakki">
    <title>Anakki-World</title>
    <!-- Fonts -->
    <!-- Theme CSS -->
    <link type="text/css" href="../assets/css/theme.css" rel="stylesheet">
    <!-- Demo CSS - No need to use these in your project -->
    <link type="text/css" href="../assets/css/demo.css" rel="stylesheet">
    <style>
        body {
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #575757;
            font-family: 'Arial', sans-serif;
        }

        .game-container {
            position: relative;
            width: 600px;
            height: 200px;
            border: 2px solid #000;
            background-color: #fff;
            overflow: hidden;
        }

        .dino {
            position: absolute;
            bottom: 0;
            left: 50px;
            width: 20px;
            height: 40px;
            background-color: #333;
        }

        .cactus {
            position: absolute;
            bottom: 0;
            right: -40px;
            width: 20px;
            height: 40px;
            background-image: url('path/to/cactus-image.png'); /* 用实际的图片路径替换 */
            background-size: cover;
            background-repeat: no-repeat;
            animation: moveCactus 2s linear infinite;
            background-color: black;
        }

        @keyframes moveCactus {
            0% {
                right: -40px;
            }
            100% {
                right: 100%;
            }
        }

        @keyframes jump {
            0% {
                bottom: 0;
            }
            50% {
                bottom: 100px;
            }
            100% {
                bottom: 0;
            }
        }

        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 20px;
            font-weight: bold;
        }

        .dev-container {
            display: grid;
            place-items: center; /* 同时水平和垂直居中 */
            height: 100vh; /* 使容器高度占满视口 */
            margin: 0;
        }
    </style>
</head>
<body>
<!-- 通用顶部导航 -->
<div id="header"></div>
<main class="main">
    <div class="dev-container">
        <h1>此页面开发中，不妨玩玩游戏空格开始游戏</h1>
        <div class="game-container">
            <div id="dino" class="dino"></div>
            <div id="cactus" class="cactus"></div>
            <p id="score">得分: 0 </p>
        </div>
        <h5>(空格开始游戏)</h5>
    </div>
</main>
<script src="../assets/vendor/jquery/jquery.min.js"></script>
<script src="../assets/vendor/popper/popper.min.js"></script>
<script src="../assets/js/bootstrap/bootstrap.min.js"></script>
<!-- FontAwesome 5 -->
<script src="../assets/vendor/fontawesome/js/fontawesome-all.min.js" defer></script>
<!-- Page plugins -->
<script src="../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
<script src="../assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.min.js"></script>
<script src="../assets/vendor/input-mask/input-mask.min.js"></script>
<script src="../assets/vendor/nouislider/js/nouislider.min.js"></script>
<script src="../assets/vendor/textarea-autosize/textarea-autosize.min.js"></script>
<!-- Theme JS -->
<script src="../assets/js/theme.js"></script>
<script>
    window.onload = function () {
        $('#header').load("../pages/header.html");
    }

    const dino = document.getElementById('dino');
    const cactus = document.getElementById('cactus');
    const scoreDisplay = document.getElementById('score');
    let score = 0;
    let isJumping = false;
    let gameRunning = false;
    let checkCollisionInterval;
    let scoreInterval;

    function jump() {
        if (isJumping) return;
        isJumping = true;
        let jumpCount = 0;
        const jumpInterval = setInterval(() => {
            if (jumpCount < 15) {
                dino.style.bottom = `${jumpCount * 5}px`;
            } else if (jumpCount < 30) {
                dino.style.bottom = `${150 - jumpCount * 5}px`;
            } else {
                clearInterval(jumpInterval);
                isJumping = false;
            }
            jumpCount++;
        }, 20);
    }

    function startGame() {
        score = 0;
        scoreDisplay.textContent = `得分: ${score}`;

        // 确保仙人掌动画和位置重置
        cactus.style.animation = 'none'; // 移除当前动画
        cactus.offsetHeight; // 触发重绘
        cactus.style.animation = 'moveCactus 2s linear infinite'; // 重新设置动画
        cactus.style.right = '-40px'; // 确保仙人掌从左侧外面开始

        gameRunning = true;

        checkCollisionInterval = setInterval(checkCollision, 10);
        scoreInterval = setInterval(updateScore, 1000);
    }

    function endGame() {
        gameRunning = false;
        cactus.style.animationPlayState = 'paused'; // 游戏结束时暂停仙人掌动画
        clearInterval(checkCollisionInterval);
        clearInterval(scoreInterval);
        alert(`游戏结束! 得分: ${score}`);
    }

    function checkCollision() {
        const dinoRect = dino.getBoundingClientRect();
        const cactusRect = cactus.getBoundingClientRect();
        if (
            dinoRect.right > cactusRect.left &&
            dinoRect.left < cactusRect.right &&
            dinoRect.bottom > cactusRect.top
        ) {
            endGame();
        }
    }

    function updateScore() {
        if (gameRunning) {
            score++;
            scoreDisplay.textContent = `得分: ${score}`;
        }
    }

    document.addEventListener('keydown', (e) => {
        if (e.code === 'Space') {
            if (!gameRunning) {
                startGame();
            } else {
                jump();
            }
        }
    });

</script>
</body>
</html>
