<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description"
          content="Probably the most complete UI kit out there. Multiple functionalities and controls added,  extended color palette and beautiful typography, designed as its own extended version of Bootstrap at  the highest level of quality.                             ">
    <meta name="author" content="Webpixels">
    <title>Anakki-World</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700,800|Roboto:400,500,700" rel="stylesheet">
    <!-- Theme CSS -->
    <link type="text/css" href="../assets/css/theme.css" rel="stylesheet">
    <!-- Demo CSS - No need to use these in your project -->
    <link type="text/css" href="../assets/css/demo.css" rel="stylesheet">
    <style>
        body {
            color: #495751b8;
            background-color: #035e0082;
        }

        .card {
            border: .0625rem solid rgba(0, 0, 0, 0.05);
            border-radius: 0.7rem;
        }

        .time-margin {
            margin-right: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .card-body {
            flex: 1 1 auto;
            padding: 1.1rem;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-transparent navbar-dark bg-dark py-4">
    <div class="container">
        <a class="navbar-brand" href="../index.html"><strong>ANAKKI</strong> X</a>
        <button class="navbar-toggler" type="button" data-action="offcanvas-open" data-target="#navbar_main"
                aria-controls="navbar_main" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse offcanvas-collapse" id="navbar_main">
            <ul class="navbar-nav ml-auto align-items-lg-center">
                <h6 class="dropdown-header font-weight-600 d-lg-none px-0">Menu</h6>
                <li class="nav-item ">
                    <a class="nav-link" href="../index.html">主页</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="#" id="navbar_main_dropdown_1" role="button" data-toggle="dropdown" aria-haspopup="true"
                       aria-expanded="false">其他</a>
                    <div class="dropdown-menu" aria-labelledby="navbar_1_dropdown_1">
                        <a class="dropdown-item" href="/pages/homepage.html">家</a>
                        <a class="dropdown-item" href="/pages/about.html">关于我</a>
                        <a class="dropdown-item" href="/pages/sign-in.html">成为我的好友</a>
                        <a class="dropdown-item" href="/pages/contact.html">留言</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../docs/life.html">漫长的一生</a>
                </li>
                <!--                <li class="nav-item">-->
                <!--                    <a href="https://github.com/webpixels/boomerang-ui-kit/archive/master.zip" target="_blank"-->
                <!--                       class="nav-link d-lg-none">Download Free</a>-->
                <!--                    <a href="https://github.com/webpixels/boomerang-ui-kit/archive/master.zip" target="_blank"-->
                <!--                       class="btn btn-sm bg-white d-none d-lg-inline-flex">Download Free</a>-->
                <!--                </li>-->
                <div class="dropdown-divider d-lg-none my-4"></div>
                <h6 class="dropdown-header font-weight-600 d-lg-none px-0">Social Media</h6>
                <li class="nav-item">
                    <a class="nav-link nav-link-icon" href="" target="_blank"><i
                            class="fab fa-instagram"></i><span class="ml-2 d-lg-none">Instagram</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-link-icon" href="" target="_blank"><i
                            class="fab fa-facebook"></i><span class="ml-2 d-lg-none">Facebook</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-link-icon" href="" target="_blank"><i
                            class="fab fa-dribbble"></i><span class="ml-2 d-lg-none">Dribbble</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-link-icon" href="https://github.com/Anyuei/anakki" target="_blank"><i
                            class="fab fa-github"></i><span class="ml-2 d-lg-none">Github</span></a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<main class="main">
    <section class="slice slice-xl bg-cover bg-size--cover" data-spotlight="fullscreen"
             style="background-image: url('https://securex-1258150206.cos.ap-beijing.myqcloud.com/backend/DSC07694.jpg')">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-7">
                    <div class="text-center pt-lg-md">
                        <h2 class="heading h1 mb-4">
                            说点什么
                        </h2>
                        <p class="lead lh-180">
                            加密留言将会加密存储，站长也需密钥才能查看。公开留言所有人可见。普通留言只能站长查看。
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="slice slice-lg">
        <div class="container">
            <div class="row align-items-center cols-xs-space cols-sm-space cols-md-space">
                <div class="col-lg-6">
                    <h3 class="heading h3 mb-4">留言板</h3>
                    <form id="commentForm">
                        <div class="row">
                            <div class="col-12">
                                <div class="form-group">
                                    <input class="form-control" placeholder="你的昵称" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="form-group">
                                    <input class="form-control" placeholder="邮箱" type="email">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="form-group">
                                    <textarea class="form-control" rows="5" placeholder="留言内容"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button type="submit" class="btn btn-primary px-4">
                                飞鸽传书
                            </button>
                        </div>
                    </form>
                </div>
                <div class="col-lg-5 ml-lg-auto">
                    <h3 class="heading heading-3 strong-300">
                        留言永久保存
                        <br>
                        支持时空漂流瓶，自定义送达时间。
                    </h3>
                    <p>朝辞白帝彩云间</p>
                    <p>千里江陵一日还</p>
                    <p>两岸猿声啼不住</p>
                    <p>轻舟已过万重山</p>
                </div>
            </div>
        </div>
    </section>
    <section class="slice slice-lg">
        <div class="container">
            <div class="row align-items-center cols-xs-space cols-sm-space cols-md-space">
                <div class="col-lg-8">
                    <h3 class="heading h3 mb-4">好友留言</h3>
                    <div class="row">
                        <div id="friend-comment" class="list-group">
                            <!--留言填充-->
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 ml-lg-auto">
                    <h3 class="heading heading-3 strong-300">
                        善于结良缘，恶言伤人心
                    </h3>
                </div>
            </div>
        </div>
    </section>
</main>
<!-- 页面底部 -->
<footer class="pt-5 pb-3 footer  footer-dark bg-tertiary">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-4">
                <div class="pr-lg-5">
                    <h1 class="heading h6 text-uppercase font-weight-700 mb-3"><strong>ANAKKI</strong> X</h1>
                    <p>个人网站建于2023年11月1日</p>

                    <p id="time-container"></p>
                </div>
            </div>

            <div class="col-6 col-md">
                <h5 class="heading h6 text-uppercase font-weight-700 mb-3">技术栈</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="#">SpringBoot</a></li>
                    <li><a class="text-muted" href="#">MySQL</a></li>
                    <li><a class="text-muted" href="#">Redis</a></li>
                    <li><a class="text-muted" href="#">Nginx</a></li>
                    <li><a class="text-muted" href="#">Bootstrap5</a></li>
                </ul>
            </div>
            <div class="col-6 col-md">
                <h5 class="heading h6 text-uppercase font-weight-700 mb-3">合作伙伴</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="#">Business</a></li>
                    <li><a class="text-muted" href="#">Education</a></li>
                    <li><a class="text-muted" href="#">Government</a></li>
                    <li><a class="text-muted" href="#">Gaming</a></li>
                </ul>
            </div>
            <div class="col-6 col-md">
                <h5 class="heading h6 text-uppercase font-weight-700 mb-3">联系方式</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="#">微信: anakki</a></li>
                    <li><a class="text-muted" href="#">电话: 13228340278</a></li>
                    <li><a class="text-muted" href="#">邮箱: ayp199645aabb@qq.com</a></li>
                    <li><a class="text-muted" href="#">抖音: 不告诉你_(:з」∠)_</a></li>
                </ul>
            </div>
            <div class="col-8 col-md">
                <h5 class="heading h6 text-uppercase font-weight-700 mb-3">打赏</h5>
                <ul class="list-unstyled text-small">
                    <li><img style="width: 60px;" src="../assets/images/alipay-person.jpg"
                             alt="">
                        <img style="width: 60px;" src="../assets/images/wechatpay-person.png"
                             alt=""></li>
                </ul>
            </div>
        </div>
        <hr>
        <div class="d-flex align-items-center">
          <span class="">
            &copy; 2023 <a href="https://webpixels.io/" class="footer-link" target="_blank">ANAKKI</a> X All rights reserved.
          </span>
            <ul class="nav ml-lg-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="https://instagram.com/webpixelsofficial" target="_blank"><i
                            class="fab fa-instagram"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://facebook.com/webpixels" target="_blank"><i
                            class="fab fa-facebook"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/webpixels" target="_blank"><i
                            class="fab fa-github"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://dribbble.com/webpixels" target="_blank"><i
                            class="fab fa-dribbble"></i></a>
                </li>
            </ul>
        </div>
    </div>
</footer>
<!-- Core -->
<script src="../assets/vendor/jquery/jquery.min.js"></script>
<script src="../assets/vendor/popper/popper.min.js"></script>
<script src="../assets/js/bootstrap/bootstrap.min.js"></script>
<!-- FontAwesome 5 -->
<script src="../assets/vendor/fontawesome/js/fontawesome-all.min.js" defer></script>
<!-- Page plugins -->
<script src="../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
<script src="../assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.min.js"></script>
<script src="../assets/vendor/input-mask/input-mask.min.js"></script>
<script src="../assets/vendor/nouislider/js/nouislider.min.js"></script>
<script src="../assets/vendor/textarea-autosize/textarea-autosize.min.js"></script>
<!-- Theme JS -->
<script src="../assets/js/theme.js"></script>

<script>
    window.onload = function () {
        const mainPageImageFlow = new XMLHttpRequest();
        mainPageImageFlow.open("GET", "/api/anakki/friends-comment/list-comments", true);
        mainPageImageFlow.onreadystatechange = function () {
            if (mainPageImageFlow.readyState === 4 && mainPageImageFlow.status === 200) {
                let html = "";
                const response = JSON.parse(mainPageImageFlow.responseText);
                const itemList = response.data.data;
                for (let i = 0; i < itemList.length; i++) {
                    const item = itemList[i];
                    let time = item.createTime;
                    const formattedDateTime = time.replace("T", " ");
                    //计算距离现在时间
                    const targetDate = new Date(time);
                    const currentDate = new Date();
                    // Calculate the difference in milliseconds
                    const timeDiff = currentDate.getTime() - targetDate.getTime();
                    // Convert milliseconds to days
                    const daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                    let daysBefore = "";
                    if (0 === daysDiff) {
                        daysBefore = "今天";
                    } else {
                        daysBefore = daysDiff + "天以前";
                    }
                    // html = html + "<div class=\"list-group-item list-group-item-action\">" +
                    //     "<div class=\"d-flex w-100 justify-content-between\">" +
                    //     "<h5 class=\"mb-1\">" + item.nickname + "</h5>" +
                    //     "<small>" + daysBefore + "</small>" +
                    //     "</div>" +
                    //     "<p class=\"mb-1\">" + item.comment + "</p>" +
                    //     "<small>" + formattedDateTime + "</small>" +
                    //     "</div>";

                    html = html +
                        "<div class=\"card mb-3 \" style=\"max-width: 1000px;\">\n" +
                            "<div class=\"row g-0\">\n" +
                                "<div class=\"col-md-4\">\n" +
                                    "<div class=\"card-body\">\n" +
                                         "<img src=\"" + item.avatar + "\" class=\"img-fluid rounded-start\" alt=\"avatar\">\n" +
                                    "</div>\n" +
                                "</div>\n" +
                                "<div class=\"col-md-8\">\n" +
                                     "<div class=\"card-body\">\n" +
                                        "<div class=\"row\">\n" +
                                            "<h5 class=\"card-title\">" + item.nickname + "</h5>\n" +
                                            "<p class=\"card-text\" style=\"padding-right: 1.0rem;\">" + item.comment + "</p>\n" +
                                        "</div>" +
                                    "</div>\n" +
                                "</div>\n" +
                            "</div>\n" +
                            "<div class=\"row align-self-end\">\n" +
                                "<div class=\"col\">\n" +
                                    "<p class=\"card-text\" style=\"padding: 0.5rem 1.5rem; margin: 0.2rem;\"><small class=\"text-body-secondary\">" + formattedDateTime + "</small></p>\n" +
                                "</div>\n" +
                            "</div>\n" +
                        "</div>";
                    ;
                }
                document.getElementById("friend-comment").innerHTML = html;
            }
        };
        mainPageImageFlow.send();
    };

    $(document).ready(function() {
        $('#commentForm').submit(function(e) {
            e.preventDefault(); // Prevent form submission
            var formData = $(this).serialize(); // Serialize form data
            $.ajax({
                url: 'your-server-url', // Replace with your server URL
                type: 'POST',
                data: formData,
                success: function(response) {
                    // Handle success response
                    console.log(response);
                },
                error: function(xhr, status, error) {
                    // Handle error response
                    console.log(error);
                }
            });
        });
    });
</script>
</body>
</html>